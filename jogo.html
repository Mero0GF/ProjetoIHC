<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            position: relative; 
            min-height: 100vh;
            font-family: 'Courier New', Courier, monospace;
            background-image: url('BackgroundMainmenu.jpg'); /* Substitua 'caminho/para/sua/imagem.jpg' pelo caminho da sua imagem */
            background-size: cover;
            background-position: center;
            background-repeat: repeat;
        }

        .container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .music-player {
            background: none; /* Removendo o fundo roxo */
            width: 500px; /* Aumentando o tamanho */
            padding: 20px; /* Espa√ßamento interno */
            text-align: center;
            margin-bottom: 20px; /* Reduzindo a margem inferior */
            border-radius: 25px;
        }

        .botao-instrumento {
            display: inline-block;
            width: 210px;
            height: 100px;
            line-height: 20px;
            font-size: 24px;
            font-weight: bold;
            background-color: rgb(122, 76, 209); /* Cor azul claro */
            color: #fff;
            margin: 10px;
            border: none;
            border-radius: 35px;
            transition: background-color 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

        .botao-instrumento.selected {
            background-color: rgb(182, 153, 236); /* Mant√©m a cor azul claro ao ser selecionado */
            color: #fff;
        }

        .botao-instrumento.confirmado {
            background-color: #28a745 !important; /* Cor verde */
        }

        .botao-voltar {
            padding: 15px 30px; /* Ajustando o tamanho */
            font-size: 22px;
            font-weight: bold;
            color: #ffffff; /* Cor roxa */
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: color 0.3s ease; /* Adicionando transi√ß√£o de cor */
            text-decoration: underline; /* Adicionando sublinhado */
            position: absolute;
            top: 10px; /* Posicionamento superior */
            left: 10px; /* Posicionamento esquerdo */
        }

        .botao-voltar:hover {
            color: #a0a0a0; /* Mudando a cor no hover */
        }

        .pontuacao {
            position: absolute;
            top: 10px;
            right: 10px; /* Movendo para a direita */
            font-size: 30px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            padding: 20px 20px;
            font-family: 'Courier New', Courier, monospace;
            color: #ffffff;
        }

        .botao-confirmar {
            display: block;
            margin-top: 40px;
            padding: 20px 50px;
            font-size: 22px;
            font-weight: bold;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .botao-confirmar:hover {
            background-color: #218838;
        }

        .mensagem-erro {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 0, 0, 0.5); /* Vermelho semi-transparente */
            color: #fff;
            font-size: 24px;
            padding: 10px 20px;
            border-radius: 10px;
            font-family: 'Courier New', Courier, monospace;
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="music-player">
            <audio controls>
                <source src>
            </audio>
        </div>

        <div>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üéπ Piano</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üé∏ Guitarra</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">ü•Å Bateria</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üé∫ Trompete</button>
        </div>
        <div>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üéª Violino</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üî∫ Tri√¢ngulo</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üéµ Viol√£o</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üëº Harpa</button>
        </div>
        <div>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üîâüé∏ Baixo</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üéº Flauta</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üéª Violoncelo</button>
            <button class="botao-instrumento" onclick="toggleSelection(this)">üéπ Teclado</button>
        </div>
        <div class="mensagem-erro">Tente novamente!</div>
        
        <button class="botao-confirmar" onclick="confirmarSelecao()">Confirmar</button>
    </div>

    <script>
        // Fun√ß√£o para trocar a sele√ß√£o do bot√£o
        let confirmado = false;
        let pontuacao = localStorage.getItem('pontuacao') ? parseInt(localStorage.getItem('pontuacao')) : 0; // Carregar a pontua√ß√£o do armazenamento local
        // Lista de arquivos de √°udio
        const listaAudios = [
            "Baixo.wav", 
            "BaixoViolao.wav", 
            "Bateria.mp3", 
            "BateriaBaixo.wav", 
            "Flauta.wav", 
            "Guitarra.wav", 
            "GuitarraBateriaBaixo.wav", 
            "GuitarraTeclado.wav", 
            "Harpa.wav", 
            "HarpaViolonceloFlautaViolino.wav", 
            "Triangulo.wav", 
            "TrianguloBateriaBaixoGuitarra.wav", 
            "Trompeta.wav", 
            "Violao.wav", 
            "Violao2.mp3", 
            "ViolaoBaixo.wav", 
            "Violino.wav", 
            "ViolinoTrompetaBateria.mp3", 
            "Violoncelo.wav", 
            "ViolonceloViolino.wav"
        ];

        // Fun√ß√£o para escolher um √°udio aleat√≥rio e reproduzi-lo
        function reproduzirAudioAleatorio() {
            // Selecionar um √°udio aleat√≥rio da lista
            const audioSelecionado = listaAudios[Math.floor(Math.random() * listaAudios.length)];

            // Alterar o src do elemento de √°udio
            const audioElement = document.querySelector('.music-player audio');
            audioElement.src = audioSelecionado;

            // Reiniciar o √°udio
            audioElement.load();
        }

        // Reproduzir um √°udio aleat√≥rio ao carregar a p√°gina
        window.addEventListener('load', () => {
            reproduzirAudioAleatorio();
        });

        // Fun√ß√£o para alternar a sele√ß√£o do bot√£o
        function toggleSelection(button) {
            if (!confirmado) {
                button.classList.toggle('selected');
            }
        }

        // Atualizar a pontua√ß√£o ao carregar a p√°gina
        window.addEventListener('load', () => {
            const pontuacaoElement = document.querySelector('.pontuacao');
            pontuacaoElement.textContent = `üèÖ Pontua√ß√£o: ${pontuacao}`;
        });

        function limparPontuacao() {
        localStorage.removeItem('pontuacao'); // Limpar a pontua√ß√£o do armazenamento local
        pontuacao = 0; // Reiniciar a pontua√ß√£o para zero
        atualizarPontuacao(); // Atualizar a exibi√ß√£o da pontua√ß√£o na p√°gina
        }

        // Fun√ß√£o para atualizar a exibi√ß√£o da pontua√ß√£o na p√°gina
        function atualizarPontuacao() {
            localStorage.removeItem('pontuacao'); // Limpar a pontua√ß√£o do armazenamento local
            pontuacao = 0; // Reiniciar a pontua√ß√£o para zero
            const pontuacaoElement = document.querySelector('.pontuacao');
            pontuacaoElement.textContent = `üèÖ Pontua√ß√£o: ${pontuacao}`;
        }
        
        // Fun√ß√£o para verificar se os bot√µes selecionados correspondem aos instrumentos corretos
        function verificarAcerto() {
            // Obter o nome do √°udio atual
            const audioAtual = document.querySelector('.music-player audio').src.split('/').pop();

            // Obter os bot√µes selecionados
            const botoesSelecionados = document.querySelectorAll('.botao-instrumento.selected');

            // Verificar se os bot√µes selecionados correspondem aos instrumentos corretos para o √°udio atual
            const instrumentosCorretos = obterInstrumentosCorretos(audioAtual);

            // Verificar se todos os instrumentos corretos est√£o presentes nos bot√µes selecionados e nenhum instrumento incorreto est√° presente
            const todosCorretos = instrumentosCorretos.every(instrumento => {
                return Array.from(botoesSelecionados).some(botao => botao.textContent.includes(instrumento))
                    && !Array.from(botoesSelecionados).some(botao => !instrumentosCorretos.includes(botao.textContent.trim()));
            });

            // Retornar verdadeiro se todos os instrumentos corretos estiverem presentes nos bot√µes selecionados
            return todosCorretos;
        }

        // Fun√ß√£o para obter os instrumentos corretos para um determinado √°udio
        function obterInstrumentosCorretos(audio) {
            switch(audio) {
                case "Baixo.wav":
                    return ['üîâüé∏ Baixo'];
                case "BaixoViolao.wav":
                    return ['üîâüé∏ Baixo', 'üéµ Viol√£o'];
                case "Bateria.mp3":
                    return ['ü•Å Bateria'];
                case "BateriaBaixo.wav":
                    return ['ü•Å Bateria', 'üîâüé∏ Baixo'];
                case "Flauta.wav":
                    return ['üéº Flauta'];
                case "Guitarra.wav":
                    return ['üé∏ Guitarra'];
                case "GuitarraBateriaBaixo.wav":
                    return ['üé∏ Guitarra', 'ü•Å Bateria', 'üîâüé∏ Baixo'];
                case "GuitarraTeclado.wav":
                    return ['üé∏ Guitarra', 'üéπ Teclado'];
                case "Harpa.wav":
                    return ['üëº Harpa'];
                case "HarpaViolonceloFlautaViolino.wav":
                    return ['üëº Harpa', 'üéª Violoncelo', 'üéº Flauta', 'üéª Violino'];
                case "Triangulo.wav":
                    return ['üî∫ Tri√¢ngulo'];
                case "TrianguloBateriaBaixoGuitarra.wav":
                    return ['üî∫ Tri√¢ngulo', 'ü•Å Bateria', 'üîâüé∏ Baixo', 'üé∏ Guitarra'];
                case "Trompeta.wav":
                    return ['üé∫ Trompete'];
                case "Violao.wav":
                    return ['üéµ Viol√£o'];
                case "Violao2.mp3":
                    return ['üéµ Viol√£o'];
                case "ViolaoBaixo.wav":
                    return ['üéµ Viol√£o', 'üîâüé∏ Baixo'];
                case "Violino.wav":
                    return ['üéª Violino'];
                case "ViolinoTrompetaBateria.mp3":
                    return ['üéª Violino', 'üé∫ Trompete', 'ü•Å Bateria'];
                case "Violoncelo.wav":
                    return ['üéª Violoncelo'];
                case "ViolonceloViolino.wav":
                    return ['üéª Violoncelo', 'üéª Violino'];
                default:
                    return [];
            }
        }

        // Fun√ß√£o para lidar com a confirma√ß√£o do usu√°rio e verificar se os instrumentos est√£o corretos
        function confirmarSelecao() {
            if (!confirmado) {
                const acertou = verificarAcerto();
                if (acertou) {
                    const buttons = document.querySelectorAll('.botao-instrumento.selected');
                    pontuacao += buttons.length * 100; // Incrementar a pontua√ß√£o com o n√∫mero de bot√µes selecionados
                    localStorage.setItem('pontuacao', pontuacao); // Salvar a pontua√ß√£o no armazenamento local
                    const pontuacaoElement = document.querySelector('.pontuacao');
                    pontuacaoElement.textContent = `üèÖ Pontua√ß√£o: ${pontuacao}`; // Atualizar o elemento de pontua√ß√£o
                    buttons.forEach(button => {
                        button.classList.remove('selected');
                        button.classList.add('confirmado');
                    });
                    confirmado = true;

                    // Trocar o bot√£o por um √≠cone de carregamento
                    const confirmarBtn = document.querySelector('.botao-confirmar');
                    confirmarBtn.innerHTML = 'Carregando...'; // Pode substituir por um √≠cone de spinner, por exemplo
                    confirmarBtn.disabled = true;

                    // Atualizar a p√°gina ap√≥s dois segundos
                    setTimeout(() => {
                        window.location.reload();
                    }, 2000);
                } 
                else {
                    pontuacao = 0;
                    atualizarPontuacao();
                    mostrarMensagemErro();
                }
            }
        }

        // Fun√ß√£o para mostrar a mensagem de erro por um segundo e depois ocult√°-la
        function mostrarMensagemErro() {
            const mensagemErro = document.querySelector('.mensagem-erro');
            mensagemErro.style.display = 'block';

            // Definir um atraso para ocultar a mensagem ap√≥s um segundo (1000 milissegundos)
            setTimeout(() => {
                ocultarMensagemErro();
            }, 1000);
        }

        // Fun√ß√£o para ocultar a mensagem de erro
        function ocultarMensagemErro() {
            const mensagemErro = document.querySelector('.mensagem-erro');
            mensagemErro.style.display = 'none';
        }

            // Event listener for the 'Escape' key to go back to the main page
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    window.location.href = 'main.html';
                }
            });
        
            // Event listener for the 'Space' key to confirm the selection
            document.addEventListener('keydown', function(event) {
                if (event.code === 'Space') {
                    confirmarSelecao();
                }
            });
        
        
    </script>

    <a class="botao-voltar" onclick="limparPontuacao()" href="main.html"><span>Voltar</span></a>

    <div class="pontuacao">üèÖ Pontua√ß√£o:</div>
</body>
</html>
